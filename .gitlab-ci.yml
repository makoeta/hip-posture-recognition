pages:
  image: node
  before_script:
    - cd instruction_site
    - npm ci --cache .npm --prefer-offline
  script:
    - npm run generate
    - echo "Listing output folder:"
    - ls -la .output/public
  artifacts:
    paths:
      - instruction_site/.output/public
  publish: instruction_site/.output/public
  rules:
    - if: $CI_COMMIT_REF_NAME == $CI_DEFAULT_BRANCH
  cache:
    key: "$CI_COMMIT_SHA"
    paths:
      - instruction_site/.npm/

